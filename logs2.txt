I (743) wifi_init: WiFi RX IRAM OP enabled
I (743) wifi_mgr: Found credentials in NVS, starting Wi-Fi
I (753) wifi_mgr: Setting Wi-Fi config SSID='R&D 3_5G' (len=8)
W (753) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (813) wifi:mode : sta (48:e7:29:b6:e8:08)
I (813) wifi:enable tsf
I (813) wifi_mgr: Wi-Fi connection initiated
I (813) wifi_mgr: Wi-Fi start requested
I (1063) wifi:new:<6,0>, old:<1,0>, ap:<255,255>, sta:<6,0>, prof:1, snd_ch_cfg:0x0
I (1063) wifi:state: init -> auth (0xb0)
I (1083) wifi_prph_coex: BLE Host Task Started
I (1093) mqtt5: [APP] Startup..
I (1093) mqtt5: [APP] Free memory: 136020 bytes
I (1093) mqtt5: [APP] IDF version: v5.5-dirty
I (1093) main_task: Returned from app_main()
I (1113) wifi_prph_coex: Device Address:48:e7:29:b6:e8:0a
I (1123) NimBLE: GAP procedure initiated: advertise;
I (1123) NimBLE: disc_mode=2
I (1123) NimBLE:  adv_channel_map=0 own_addr_type=0 adv_filter_policy=0 adv_itvl_min=0 adv_itvl_max=0
I (1133) NimBLE:

I (2073) wifi:state: auth -> init (0x200)
I (2083) wifi:Coexist: Wi-Fi connect fail, apply reconnect coex policy

I (2083) wifi:new:<6,0>, old:<6,0>, ap:<255,255>, sta:<6,0>, prof:1, snd_ch_cfg:0x0
I (2083) wifi_mgr: WIFI_EVENT_STA_DISCONNECTED












mqtt.h:




/*
 * SPDX-FileCopyrightText: 2022-2023 Espressif Systems (Shanghai) CO LTD
 *
 * SPDX-License-Identifier: Apache-2.0
 */

#include <stdio.h>
#include <stdint.h>
#include <stddef.h>
#include <string.h>
#include "esp_system.h"
#include "nvs_flash.h"
#include "esp_event.h"
#include "esp_netif.h"
//#include "protocol_examples_common.h"
#include "esp_log.h"
#include "mqtt_client.h"

/* public startup function - call this after Wi-Fi is connected */
void mqtt5_app_start(void);



static esp_mqtt5_user_property_item_t user_property_arr[] = {
        {"board", "esp32"},
        {"u", "user"},
        {"p", "password"}
    };

#define USE_PROPERTY_ARR_SIZE   sizeof(user_property_arr)/sizeof(esp_mqtt5_user_property_item_t)

static esp_mqtt5_publish_property_config_t publish_property = {
    .payload_format_indicator = 1,
    .message_expiry_interval = 1000,
    .topic_alias = 0,
    .response_topic = "/topic/test/response",
    .correlation_data = "123456",
    .correlation_data_len = 6,
};

static esp_mqtt5_subscribe_property_config_t subscribe_property = {
    .subscribe_id = 25555,
    .no_local_flag = false,
    .retain_as_published_flag = false,
    .retain_handle = 0,
    .is_share_subscribe = true,
    .share_name = "group1",
};

static esp_mqtt5_subscribe_property_config_t subscribe1_property = {
    .subscribe_id = 25555,
    .no_local_flag = true,
    .retain_as_published_flag = false,
    .retain_handle = 0,
};

static esp_mqtt5_unsubscribe_property_config_t unsubscribe_property = {
    .is_share_subscribe = true,
    .share_name = "group1",
};

static esp_mqtt5_disconnect_property_config_t disconnect_property = {
    .session_expiry_interval = 60,
    .disconnect_reason = 0,
};